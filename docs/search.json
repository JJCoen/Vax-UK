[
  {
    "objectID": "data-sources.html",
    "href": "data-sources.html",
    "title": "Data Sources",
    "section": "",
    "text": "NOMIS query: National Population projections by single year of age\n\n\nGeography: United Kingdom\nAge: All 5-year age groups\nProjected Year: 2018-2023\nSex: Total\nFormat: Microsoft Excel\nDownload file to raw-data folder and save as nomis-pop-18-23.xlsx\n\n\n\n\nNOMIS query: Population estimates - local authority based by five year age band\n\n\nGeography &gt; countries &gt; All\nDate: 2010, 2012-2017\nAge: All 5-year age groups\nPercent: off\nProjected Year: 2018-2023\nSex: Total\nFormat: Microsoft Excel\nDownload file to raw-data folder and save as nomis-pop-10-17.xlsx"
  },
  {
    "objectID": "data-sources.html#population",
    "href": "data-sources.html#population",
    "title": "Data Sources",
    "section": "",
    "text": "NOMIS query: National Population projections by single year of age\n\n\nGeography: United Kingdom\nAge: All 5-year age groups\nProjected Year: 2018-2023\nSex: Total\nFormat: Microsoft Excel\nDownload file to raw-data folder and save as nomis-pop-18-23.xlsx\n\n\n\n\nNOMIS query: Population estimates - local authority based by five year age band\n\n\nGeography &gt; countries &gt; All\nDate: 2010, 2012-2017\nAge: All 5-year age groups\nPercent: off\nProjected Year: 2018-2023\nSex: Total\nFormat: Microsoft Excel\nDownload file to raw-data folder and save as nomis-pop-10-17.xlsx"
  },
  {
    "objectID": "data-sources.html#mortality",
    "href": "data-sources.html#mortality",
    "title": "Data Sources",
    "section": "Mortality",
    "text": "Mortality\nDeaths registered monthly in England and Wales\nThere is a separate file for each year. They are contained in\n./raw-data/ONS-deaths-monthly-yyyy.xls, where yyyy denotes the relevant year."
  },
  {
    "objectID": "transform.html",
    "href": "transform.html",
    "title": "Transform Population and Mortality Counts",
    "section": "",
    "text": "Ten age categories in use by ONS in mortality data for year 2018:\n“Under 1 year”, “1-14”, “15-44”, “45-64”, “65-74,” “75-84”, “85+”\nSince the NOMIS population data for 2018 to 2023 does not record counts for the under 1 year group, it is necessary to combine this with the 1-14 group.\n\n\n\n\nInput source data for population projections by age category for years 2018 to 2023. /n Record estimates in separate numeric vectors for each year\n# The population projections file, \"nomis-pop-18-23.xlsx\", \n# records population by age category up to 105+\n# There are separate tables for each year,\n# all on the same sheet\n\n# record age categories\nage_cat &lt;- c(\"0-4\", \"5-9\", \"10-14\", \"15-19\", \"20-24\", \"25-29\", \"30-34\", \"35-39\", \"40-44\", \"45-49\", \"50-54\", \"55-59\", \"60-64\", \"65-69\", \"70-74\", \"75-79\", \"80-84\", \"85+\")\n\n\n# 2018 population counts for England and Wales\npop_proj_18 &lt;- read_excel(\"./raw-data/nomis-pop-18-23.xlsx\",\n                            range = \"H7:H29\") |&gt; \n    clean_names() |&gt; \n    as.data.table()\n\n# 2019 population counts \npop_proj_19 &lt;- read_excel(\"./raw-data/nomis-pop-18-23.xlsx\",\n                            range = \"H39:H61\") |&gt; \n    clean_names() |&gt; \n    as.data.table()\n# 2020 population counts \npop_proj_20 &lt;- read_excel(\"./raw-data/nomis-pop-18-23.xlsx\",\n                            range = \"H71:H93\") |&gt; \n    clean_names() |&gt; \n    as.data.table()\n# 2021 population counts \npop_proj_21 &lt;- read_excel(\"./raw-data/nomis-pop-18-23.xlsx\",\n                            range = \"H103:H125\") |&gt; \n    clean_names() |&gt; \n    as.data.table()\n# 2022 population counts \npop_proj_22 &lt;- read_excel(\"./raw-data/nomis-pop-18-23.xlsx\",\n                            range = \"H135:H157\") |&gt; \n    clean_names() |&gt; \n    as.data.table()\n# 2023 population counts \npop_proj_23 &lt;- read_excel(\"./raw-data/nomis-pop-18-23.xlsx\",\n                            range = \"H167:H189\") |&gt; \n    clean_names() |&gt; \n    as.data.table()\n\n\nSum counts for age categories Aged 85-89, Aged 90-94, Aged 95-99, Aged 100-104, Aged 105+ into a single category “85+”\n\n\nCode\nsum_older &lt;- function(dt) {\n    dt[18, ] &lt;- sum(dt[18:22, ])\n    # remove rows above 90 years\n    dt &lt;- dt[1:18, ]\n    return(dt)\n}\npop_proj_18 &lt;- sum_older(pop_proj_18)\npop_proj_19 &lt;- sum_older(pop_proj_19)\npop_proj_20 &lt;- sum_older(pop_proj_20)\npop_proj_21 &lt;- sum_older(pop_proj_21)\npop_proj_22 &lt;- sum_older(pop_proj_22)\npop_proj_23 &lt;- sum_older(pop_proj_23)\n\n\nAggregate age categories to six groups in ONS mortality data\n\n\nCode\nsource(\"./scripts/transform-pop.R\")\npop_proj_18[, \"age_cat\" := age_cat]\nsetnames(pop_proj_18, \"england_and_wales\", \"count\")\npop_18 &lt;- transform_pop(pop_proj_18)\npop_18[, \"year\" := rep(2018, 6)]\n\npop_proj_19[, \"age_cat\" := age_cat]\nsetnames(pop_proj_19, \"england_and_wales\", \"count\")\npop_19 &lt;- transform_pop(pop_proj_19)\npop_19[, \"year\" := rep(2019, 6)]\n\npop_proj_20[, \"age_cat\" := age_cat]\nsetnames(pop_proj_20, \"england_and_wales\", \"count\")\npop_20 &lt;- transform_pop(pop_proj_20)\npop_20[, \"year\" := rep(2020, 6)]\n\npop_proj_21[, \"age_cat\" := age_cat]\nsetnames(pop_proj_21, \"england_and_wales\", \"count\")\npop_21 &lt;- transform_pop(pop_proj_21)\npop_21[, \"year\" := rep(2021, 6)]\n\npop_proj_22[, \"age_cat\" := age_cat]\nsetnames(pop_proj_22, \"england_and_wales\", \"count\")\npop_22 &lt;- transform_pop(pop_proj_22)\npop_22[, \"year\" := rep(2022, 6)]\n\npop_proj_23[, \"age_cat\" := age_cat]\nsetnames(pop_proj_23, \"england_and_wales\", \"count\")\npop_23 &lt;- transform_pop(pop_proj_23)\npop_23[, \"year\" := rep(2023, 6)]\n\n# clean up\nrm(pop_proj_18, pop_proj_19, pop_proj_20, pop_proj_21,\n     pop_proj_22, pop_proj_23)\n\n\n\n\n\n\n\nInput source data for population estimates by age category for years 2010 to 2017. /n Record estimates in table with a separate column for each year\n# The population estimates file, \"nomis-pop-10-17.xlsx\", \n# records population by age category up to 85+\npop_est_10_17 &lt;- read_xlsx(\"./raw-data/nomis-pop-10-17.xlsx\", \n                            range = \"A8:I28\") |&gt; \n    as.data.table()\n\n# remove \"Column Total\" row\npop_est_10_17 &lt;- pop_est_10_17[1:19, ]\n# combine \"Aged under 1 year\" and \"Aged 1-4 years\"\nage_1_4 &lt;- pop_est_10_17[2, c(\"2010\", \"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\", \"2017\")] |&gt; \n    as.numeric()\nage_0 &lt;- pop_est_10_17[1, c(\"2010\", \"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\", \"2017\")] |&gt; \n    as.numeric()\nage_0_4 &lt;- age_1_4 + age_0\npop_est_10_17[2, c(\"2010\", \"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\", \"2017\") := as.list(age_0_4)]\n# remove \"Aged under 1 year\" row\npop_est_10_17 &lt;- pop_est_10_17[2:19, ]\n\n\nUpdate age categories\n\n\nCode\npop_est_10_17[, \"age_cat\" := age_cat][, \"Age\" := NULL]\n\npop_10 &lt;- pop_est_10_17[, c(\"age_cat\", \"2010\")]\nsetnames(pop_10, \"2010\", \"count\")\npop_10 &lt;- transform_pop(pop_10)\npop_10[, \"year\" := rep(2010, 6)]\n\npop_11 &lt;- pop_est_10_17[, c(\"age_cat\", \"2011\")]\nsetnames(pop_11, \"2011\", \"count\")\npop_11 &lt;- transform_pop(pop_11)\npop_11[, \"year\" := rep(2011, 6)]\n\npop_12 &lt;- pop_est_10_17[, c(\"age_cat\", \"2012\")]\nsetnames(pop_12, \"2012\", \"count\")\npop_12 &lt;- transform_pop(pop_12)\npop_12[, \"year\" := rep(2012, 6)]\n\npop_13 &lt;- pop_est_10_17[, c(\"age_cat\", \"2013\")]\nsetnames(pop_13, \"2013\", \"count\")\npop_13 &lt;- transform_pop(pop_13)\npop_13[, \"year\" := rep(2013, 6)]\n\npop_14 &lt;- pop_est_10_17[, c(\"age_cat\", \"2014\")]\nsetnames(pop_14, \"2014\", \"count\")\npop_14 &lt;- transform_pop(pop_14)\npop_14[, \"year\" := rep(2014, 6)]\n\npop_15 &lt;- pop_est_10_17[, c(\"age_cat\", \"2015\")]\nsetnames(pop_15, \"2015\", \"count\")\npop_15 &lt;- transform_pop(pop_15)\npop_15[, \"year\" := rep(2015, 6)]\n\npop_16 &lt;- pop_est_10_17[, c(\"age_cat\", \"2016\")]\nsetnames(pop_16, \"2016\", \"count\")\npop_16 &lt;- transform_pop(pop_16)\npop_16[, \"year\" := rep(2016, 6)]\n\npop_17 &lt;- pop_est_10_17[, c(\"age_cat\", \"2017\")]\nsetnames(pop_17, \"2017\", \"count\")\npop_17 &lt;- transform_pop(pop_17)\npop_17[, \"year\" := rep(2017, 6)]\n\nrm(pop_est_10_17)\n\n\nCombine population counts for all years into a single table\n\n\nCode\npop_tables &lt;- list(pop_10, pop_11, pop_12, pop_13, pop_14, pop_15, pop_16, pop_17, pop_18, pop_19, pop_20, pop_21, pop_22, pop_23)\n\npop_uk &lt;- rbindlist(pop_tables, use.names = TRUE)\n\nrm(pop_tables, pop_10, pop_11, pop_12, pop_13, pop_14, pop_15, pop_16, pop_17, pop_18, pop_19, pop_20, pop_21, pop_22, pop_23)\nrm(age_0, age_0_4, age_1_4)\n\nsaveRDS(pop_uk, file = \"./processed-data/uk-pop.rds\")"
  },
  {
    "objectID": "transform.html#population-by-age-category",
    "href": "transform.html#population-by-age-category",
    "title": "Transform Population and Mortality Counts",
    "section": "",
    "text": "Ten age categories in use by ONS in mortality data for year 2018:\n“Under 1 year”, “1-14”, “15-44”, “45-64”, “65-74,” “75-84”, “85+”\nSince the NOMIS population data for 2018 to 2023 does not record counts for the under 1 year group, it is necessary to combine this with the 1-14 group.\n\n\n\n\nInput source data for population projections by age category for years 2018 to 2023. /n Record estimates in separate numeric vectors for each year\n# The population projections file, \"nomis-pop-18-23.xlsx\", \n# records population by age category up to 105+\n# There are separate tables for each year,\n# all on the same sheet\n\n# record age categories\nage_cat &lt;- c(\"0-4\", \"5-9\", \"10-14\", \"15-19\", \"20-24\", \"25-29\", \"30-34\", \"35-39\", \"40-44\", \"45-49\", \"50-54\", \"55-59\", \"60-64\", \"65-69\", \"70-74\", \"75-79\", \"80-84\", \"85+\")\n\n\n# 2018 population counts for England and Wales\npop_proj_18 &lt;- read_excel(\"./raw-data/nomis-pop-18-23.xlsx\",\n                            range = \"H7:H29\") |&gt; \n    clean_names() |&gt; \n    as.data.table()\n\n# 2019 population counts \npop_proj_19 &lt;- read_excel(\"./raw-data/nomis-pop-18-23.xlsx\",\n                            range = \"H39:H61\") |&gt; \n    clean_names() |&gt; \n    as.data.table()\n# 2020 population counts \npop_proj_20 &lt;- read_excel(\"./raw-data/nomis-pop-18-23.xlsx\",\n                            range = \"H71:H93\") |&gt; \n    clean_names() |&gt; \n    as.data.table()\n# 2021 population counts \npop_proj_21 &lt;- read_excel(\"./raw-data/nomis-pop-18-23.xlsx\",\n                            range = \"H103:H125\") |&gt; \n    clean_names() |&gt; \n    as.data.table()\n# 2022 population counts \npop_proj_22 &lt;- read_excel(\"./raw-data/nomis-pop-18-23.xlsx\",\n                            range = \"H135:H157\") |&gt; \n    clean_names() |&gt; \n    as.data.table()\n# 2023 population counts \npop_proj_23 &lt;- read_excel(\"./raw-data/nomis-pop-18-23.xlsx\",\n                            range = \"H167:H189\") |&gt; \n    clean_names() |&gt; \n    as.data.table()\n\n\nSum counts for age categories Aged 85-89, Aged 90-94, Aged 95-99, Aged 100-104, Aged 105+ into a single category “85+”\n\n\nCode\nsum_older &lt;- function(dt) {\n    dt[18, ] &lt;- sum(dt[18:22, ])\n    # remove rows above 90 years\n    dt &lt;- dt[1:18, ]\n    return(dt)\n}\npop_proj_18 &lt;- sum_older(pop_proj_18)\npop_proj_19 &lt;- sum_older(pop_proj_19)\npop_proj_20 &lt;- sum_older(pop_proj_20)\npop_proj_21 &lt;- sum_older(pop_proj_21)\npop_proj_22 &lt;- sum_older(pop_proj_22)\npop_proj_23 &lt;- sum_older(pop_proj_23)\n\n\nAggregate age categories to six groups in ONS mortality data\n\n\nCode\nsource(\"./scripts/transform-pop.R\")\npop_proj_18[, \"age_cat\" := age_cat]\nsetnames(pop_proj_18, \"england_and_wales\", \"count\")\npop_18 &lt;- transform_pop(pop_proj_18)\npop_18[, \"year\" := rep(2018, 6)]\n\npop_proj_19[, \"age_cat\" := age_cat]\nsetnames(pop_proj_19, \"england_and_wales\", \"count\")\npop_19 &lt;- transform_pop(pop_proj_19)\npop_19[, \"year\" := rep(2019, 6)]\n\npop_proj_20[, \"age_cat\" := age_cat]\nsetnames(pop_proj_20, \"england_and_wales\", \"count\")\npop_20 &lt;- transform_pop(pop_proj_20)\npop_20[, \"year\" := rep(2020, 6)]\n\npop_proj_21[, \"age_cat\" := age_cat]\nsetnames(pop_proj_21, \"england_and_wales\", \"count\")\npop_21 &lt;- transform_pop(pop_proj_21)\npop_21[, \"year\" := rep(2021, 6)]\n\npop_proj_22[, \"age_cat\" := age_cat]\nsetnames(pop_proj_22, \"england_and_wales\", \"count\")\npop_22 &lt;- transform_pop(pop_proj_22)\npop_22[, \"year\" := rep(2022, 6)]\n\npop_proj_23[, \"age_cat\" := age_cat]\nsetnames(pop_proj_23, \"england_and_wales\", \"count\")\npop_23 &lt;- transform_pop(pop_proj_23)\npop_23[, \"year\" := rep(2023, 6)]\n\n# clean up\nrm(pop_proj_18, pop_proj_19, pop_proj_20, pop_proj_21,\n     pop_proj_22, pop_proj_23)\n\n\n\n\n\n\n\nInput source data for population estimates by age category for years 2010 to 2017. /n Record estimates in table with a separate column for each year\n# The population estimates file, \"nomis-pop-10-17.xlsx\", \n# records population by age category up to 85+\npop_est_10_17 &lt;- read_xlsx(\"./raw-data/nomis-pop-10-17.xlsx\", \n                            range = \"A8:I28\") |&gt; \n    as.data.table()\n\n# remove \"Column Total\" row\npop_est_10_17 &lt;- pop_est_10_17[1:19, ]\n# combine \"Aged under 1 year\" and \"Aged 1-4 years\"\nage_1_4 &lt;- pop_est_10_17[2, c(\"2010\", \"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\", \"2017\")] |&gt; \n    as.numeric()\nage_0 &lt;- pop_est_10_17[1, c(\"2010\", \"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\", \"2017\")] |&gt; \n    as.numeric()\nage_0_4 &lt;- age_1_4 + age_0\npop_est_10_17[2, c(\"2010\", \"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\", \"2017\") := as.list(age_0_4)]\n# remove \"Aged under 1 year\" row\npop_est_10_17 &lt;- pop_est_10_17[2:19, ]\n\n\nUpdate age categories\n\n\nCode\npop_est_10_17[, \"age_cat\" := age_cat][, \"Age\" := NULL]\n\npop_10 &lt;- pop_est_10_17[, c(\"age_cat\", \"2010\")]\nsetnames(pop_10, \"2010\", \"count\")\npop_10 &lt;- transform_pop(pop_10)\npop_10[, \"year\" := rep(2010, 6)]\n\npop_11 &lt;- pop_est_10_17[, c(\"age_cat\", \"2011\")]\nsetnames(pop_11, \"2011\", \"count\")\npop_11 &lt;- transform_pop(pop_11)\npop_11[, \"year\" := rep(2011, 6)]\n\npop_12 &lt;- pop_est_10_17[, c(\"age_cat\", \"2012\")]\nsetnames(pop_12, \"2012\", \"count\")\npop_12 &lt;- transform_pop(pop_12)\npop_12[, \"year\" := rep(2012, 6)]\n\npop_13 &lt;- pop_est_10_17[, c(\"age_cat\", \"2013\")]\nsetnames(pop_13, \"2013\", \"count\")\npop_13 &lt;- transform_pop(pop_13)\npop_13[, \"year\" := rep(2013, 6)]\n\npop_14 &lt;- pop_est_10_17[, c(\"age_cat\", \"2014\")]\nsetnames(pop_14, \"2014\", \"count\")\npop_14 &lt;- transform_pop(pop_14)\npop_14[, \"year\" := rep(2014, 6)]\n\npop_15 &lt;- pop_est_10_17[, c(\"age_cat\", \"2015\")]\nsetnames(pop_15, \"2015\", \"count\")\npop_15 &lt;- transform_pop(pop_15)\npop_15[, \"year\" := rep(2015, 6)]\n\npop_16 &lt;- pop_est_10_17[, c(\"age_cat\", \"2016\")]\nsetnames(pop_16, \"2016\", \"count\")\npop_16 &lt;- transform_pop(pop_16)\npop_16[, \"year\" := rep(2016, 6)]\n\npop_17 &lt;- pop_est_10_17[, c(\"age_cat\", \"2017\")]\nsetnames(pop_17, \"2017\", \"count\")\npop_17 &lt;- transform_pop(pop_17)\npop_17[, \"year\" := rep(2017, 6)]\n\nrm(pop_est_10_17)\n\n\nCombine population counts for all years into a single table\n\n\nCode\npop_tables &lt;- list(pop_10, pop_11, pop_12, pop_13, pop_14, pop_15, pop_16, pop_17, pop_18, pop_19, pop_20, pop_21, pop_22, pop_23)\n\npop_uk &lt;- rbindlist(pop_tables, use.names = TRUE)\n\nrm(pop_tables, pop_10, pop_11, pop_12, pop_13, pop_14, pop_15, pop_16, pop_17, pop_18, pop_19, pop_20, pop_21, pop_22, pop_23)\nrm(age_0, age_0_4, age_1_4)\n\nsaveRDS(pop_uk, file = \"./processed-data/uk-pop.rds\")"
  },
  {
    "objectID": "transform.html#mortality-by-age-category",
    "href": "transform.html#mortality-by-age-category",
    "title": "Transform Population and Mortality Counts",
    "section": "Mortality by Age Category",
    "text": "Mortality by Age Category\n\n\nCode\nsource(\"./scripts/transform-mort.R\")\n\nmort_week_10 &lt;- read_xls(\"./raw-data/ONS-mort-Eng-Wales-2010.xls\",\n                         sheet = \"Weekly Figures 2010\", \n                         range = \"A16:BA22\",\n                         col_names = FALSE) |&gt; \n    clean_names() |&gt; \n    as.data.table()\n\nmort_10 &lt;- transform_mort(mort_week_10)\n\nmort_week_11 &lt;- read_xls(\"./raw-data/ONS-mort-Eng-Wales-2011.xls\",\n                         sheet = \"Weekly Figures 2011\", \n                         range = \"A17:BA23\",\n                         col_names = FALSE) |&gt; \n    clean_names() |&gt; \n    as.data.table()\n\nmort_11 &lt;- transform_mort(mort_week_11)\n\nmort_week_12 &lt;- read_xls(\"./raw-data/ONS-mort-Eng-Wales-2012.xls\",\n                         sheet = \"Weekly Figures 2012\", \n                         range = \"A16:BA22\",\n                         col_names = FALSE) |&gt; \n    clean_names() |&gt; \n    as.data.table()\n\nmort_12 &lt;- transform_mort(mort_week_12)\n\nmort_week_13 &lt;- read_xls(\"./raw-data/ONS-mort-Eng-Wales-2013.xls\",\n                         sheet = \"Weekly Figures 2013\", \n                         range = \"A16:BA22\",\n                         col_names = FALSE) |&gt; \n    clean_names() |&gt; \n    as.data.table()\n\nmort_13 &lt;- transform_mort(mort_week_13)\n\nmort_week_14 &lt;- read_xls(\"./raw-data/ONS-mort-Eng-Wales-2014.xls\",\n                         sheet = \"Weekly Figures 2014\", \n                         range = \"A16:BA22\",\n                         col_names = FALSE) |&gt; \n    clean_names() |&gt; \n    as.data.table()\n\nmort_14 &lt;- transform_mort(mort_week_14)\n\nmort_week_15 &lt;- read_xls(\"./raw-data/ONS-mort-Eng-Wales-2015.xls\",\n                         sheet = \"Weekly Figures 2015\", \n                         range = \"A16:BA22\",\n                         col_names = FALSE) |&gt; \n    clean_names() |&gt; \n    as.data.table()\n\nmort_15 &lt;- transform_mort(mort_week_15)\n\nmort_week_16 &lt;- read_xls(\"./raw-data/ONS-mort-Eng-Wales-2016.xls\",\n                         sheet = \"Weekly figures 2016\", \n                         range = \"B16:BB22\",\n                         col_names = FALSE) |&gt; \n    clean_names() |&gt; \n    as.data.table()\n\nmort_16 &lt;- transform_mort(mort_week_16)\n\nmort_week_17 &lt;- read_xls(\"./raw-data/ONS-mort-Eng-Wales-2017.xls\",\n                         sheet = \"Weekly figures 2017\", \n                         range = \"B16:BB22\",\n                         col_names = FALSE) |&gt; \n    clean_names() |&gt; \n    as.data.table()\n\nmort_17 &lt;- transform_mort(mort_week_17)\n\nmort_week_18 &lt;- read_xls(\"./raw-data/ONS-mort-Eng-Wales-2018.xls\",\n                         sheet = \"Weekly figures 2018\",\n                         range = \"B16:BB22\",\n                         col_names = FALSE) |&gt;\n    clean_names() |&gt;\n    as.data.table()\n\nmort_18 &lt;- transform_mort(mort_week_18)\n\nmort_week_19 &lt;- read_xls(\"./raw-data/ONS-mort-Eng-Wales-2019.xls\",\n                         sheet = \"Weekly figures 2019\",\n                         range = \"B16:BB22\",\n                         col_names = FALSE) |&gt;\n    clean_names() |&gt;\n    as.data.table()\n\nmort_19 &lt;- transform_mort(mort_week_19)\n\n\nSource data for 2020, 2021, 2022, and 2023 records counts for 5-year age categories\n\n\nCode\nsource(\"./scripts/transform-mort-5yr.R\")\n\nmort_week_20 &lt;- read_xlsx(\"./raw-data/ONS-mort-Eng-Wales-2020.xlsx\",\n                         sheet = \"Weekly figures 2020\",\n                         range = \"B22:BC41\",\n                         col_names = FALSE) |&gt;\n    clean_names() |&gt;\n    as.data.table()\n\nmort_20 &lt;- transform_mort_5yr(mort_week_20)\n\nmort_week_21 &lt;- read_xlsx(\"./raw-data/ONS-mort-Eng-Wales-2021.xlsx\",\n                         sheet = \"Weekly figures 2021\",\n                         range = \"B18:BB37\",\n                         col_names = FALSE) |&gt;\n    clean_names() |&gt;\n    as.data.table()\n\nmort_21 &lt;- transform_mort_5yr(mort_week_21)\n\nmort_week_22 &lt;- read_xlsx(\"./raw-data/ONS-mort-Eng-Wales-2022.xlsx\",\n                         sheet = \"2\",\n                         range = \"D7:W59\") |&gt;\n    as.data.table()\n\nmort_w_22 &lt;- pivot_longer(mort_week_22, cols = everything(),\n             names_to = \"age_cat\", \n             values_to = \"count\") |&gt; \n    as.data.table()\n\nmort_22 &lt;- convert_5yr(mort_w_22)\n\nmort_week_23 &lt;- read_xlsx(\"./raw-data/ONS-mort-Eng-Wales-2023.xlsx\",\n                         sheet = \"2\",\n                         range = \"D7:W59\") |&gt;\n    as.data.table()\nmort_w_23 &lt;- pivot_longer(mort_week_23, cols = everything(),\n             names_to = \"age_cat\", \n             values_to = \"count\") |&gt; \n    as.data.table()\n\nmort_23 &lt;- convert_5yr(mort_w_23)\n\n\n\n\nCode\n# clean up\nrm(list = c(\"mort_w_22\", \"mort_w_23\", \"mort_week_10\", \"mort_week_11\", \"mort_week_12\", \"mort_week_13\", \"mort_week_14\", \"mort_week_15\",  \"mort_week_16\", \"mort_week_17\", \"mort_week_18\", \"mort_week_19\",  \"mort_week_20\",  \"mort_week_21\", \"mort_week_22\", \"mort_week_23\" ))\n\n# combine into single table\nmort_tables &lt;- list(mort_10, mort_11, mort_12, mort_13, mort_14, mort_15, mort_16, mort_17, mort_18, mort_19, mort_20, mort_21, mort_22, mort_23)\n\nmort_uk &lt;- rbindlist(mort_tables, use.names = TRUE)\n\nrm(mort_tables, mort_10, mort_11, mort_12, mort_13, mort_14, mort_15, mort_16, mort_17, mort_18, mort_19, mort_20, mort_21, mort_22, mort_23)\n# rm(age_0, age_0_4, age_1_4)\n\nsaveRDS(mort_uk, file = \"./processed-data/uk-mort.rds\")"
  }
]